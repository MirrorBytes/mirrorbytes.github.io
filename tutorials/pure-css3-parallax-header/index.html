<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Pure CSS3 Parallax Header - Portfolio</title><link rel=icon href="data:;base64,iVBORw0KGgo="><link rel=stylesheet type=text/css href=https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css><link rel=stylesheet href=../../css/style.css></head><body><main id=app><nav id=main-nav><input id=main-nav-toggle type=checkbox><label for=main-nav-toggle><span></span></label><ul><li><a href=../../ >âŒ‚</a></li><li><a href=../../tutorials/ class=active>Tutorials</a></li><li><a href=http://codepen.io/MirrorBytes/ >My CodePen</a></li><li><a href=https://github.com/MirrorBytes>My GitHub</a></li></ul></nav><div id=content><h3>Pure CSS3 Parallax Header</h3><div id=media><img class=ratio src=https://placehold.it/16x9><iframe src=https://www.youtube.com/embed/ygD2QgGS3u0 frameborder=0 allowfullscreen></iframe></div><p class=drop-cap>Just to explain this tutorial a bit more in detail, I&#39;m writing it up. An interesting fact, the collection of this knowledge is actually quite simplistic; the math behind it is quite complicated without proper representation though.</p><p>There are dozens of articles that explain the math, and all of them make valid points. I would highly recommend checking some out! Just search it up on Google, and you&#39;ll find a remarkable amount of research in this single area! Considering this is untamed territory of browsers, there are quite a number of bugs; I mention the ones relevant to this particular project, and the proper fixes. It may seem a bit confusing at first, until you realize that not even the browser is properly calculating the values. In the future, I am hoping there will be a solid fix to each one of these bugs, but until then we shall manage. I bet you now feel a little bit more comfortable with this just by me saying that, so let&#39;s move on. Here are the pages I referenced while making this tutorial:</p><ul><li><a href=http://keithclark.co.uk/articles/pure-css-parallax-websites/ >Keith Clark&#39;s Pure CSS Parallax Websites</a></li><li><a href=http://keithclark.co.uk/articles/practical-css-parallax/ >Keith Clark&#39;s Practical CSS Parallax</a></li></ul><p>Time to move into the actual tutorial!</p><hr><p>For those of you that had not watched the video, or cannot, I shall state that the finished product of this tutorial is ready for production-level projects. It has an incredibly smooth animation that does not hinder performance in the slightest, and it will not induce any migraines!</p><h6 id=dependency->Dependency:</h6><ul><li><a href=https://necolas.github.io/normalize.css/ >Normalize</a></li></ul><h6 id=my-html5-setup->My HTML5 Setup:</h6><pre><code class=lang-html>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot; /&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;
        &lt;meta http-equiv=&quot;x-ua-compatible&quot; content=&quot;ie=edge&quot; /&gt;

        &lt;title&gt;&lt;/title&gt;

        &lt;link rel=&quot;icon&quot; href=&quot;data:;base64,iVBORw0KGgo=&quot; /&gt;
    &lt;/head&gt;

    &lt;body&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre><h6 id=basic-css->Basic CSS:</h6><pre><code class=lang-css>&lt;style type=&quot;text/css&quot;&gt;
    *,
    *::before,
    *::after {
        -webkit-box-sizing:border-box;
        -moz-box-sizing:border-box;
        box-sizing:border-box;
    }

    html,
    body,
    body &gt; header,
    body &gt; section {
        height:100vh;

        position:relative;
    }

    * {
        margin:0;
        padding:0;
    }

    html { overflow:hidden; }
    body {
        overflow-x:hidden;
        overflow-y:auto;
    }
&lt;/style&gt;
</code></pre><p>First, throw that into the head. Second, I use this CSS setup in nearly every one of my projects. Without this setup, I have found that html and body don&#39;t play nicely together in several situations, considering html likes to do its own thing with overflow. This next helper class is one I use for easier manipulation of images:</p><pre><code class=lang-css>.background-image {
    width:102%;
    height:100%;

    background-size:100%;
    background-repeat:no-repeat;
    background-position:center;

    top:0;
    left:0;
    right:0;
    bottom:0;
    z-index:-1;
    position:absolute;

    -webkit-pointer-events:none;
    -moz-pointer-events:none;
    pointer-events:none;
}
</code></pre><h6 id=testing-markup->Testing Markup:</h6><pre><code class=lang-html>&lt;header&gt;
    &lt;div class=&quot;background-image&quot;&gt;&lt;/div&gt;
    &lt;div&gt;
        &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
        consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
        cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
        proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&lt;/p&gt;
    &lt;/div&gt;
&lt;/header&gt;
&lt;section&gt;
    &lt;div&gt;
        &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
        consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
        cillum dolore eu fugiat nulla pariatur.&lt;/p&gt;
    &lt;/div&gt;
&lt;/section&gt;
</code></pre><p>This is fairly straight forward. Throw this into the body and look over the remaining CSS.</p><h6 id=parallax-css->Parallax CSS:</h6><p>Now that all of the preliminary CSS is there, we can move onto fun stuff.</p><pre><code class=lang-css>/**
 * Remember scale = 1 + (translateZ * -1) / perspective.
 * Set z-index:-1; to parallax background.
 * ----------------------------------------------------------
 * Set z-index:1; to all remaining groups that are not using parallax.
 */

@supports ((perspective: 1px) and (not (-webkit-overflow-scrolling: touch))) {
    body {
        -webkit-perspective:1px;
        -moz-perspective:1px;
        perspective:1px;

        perspective-origin:100%; // part 1 of a 2 part fix for Webkit browsers. Corrects bug in calculation of width.

        transform:translateZ(0); // fixes a bug in Edge browser, prevents error in rendering webpage.

        -webkit-transform-style:preserve-3d;
        -moz-transform-style:preserve-3d;
        transform-style:preserve-3d;
    }

    body &gt; header { // this is a fix for Mozilla, as their definition of inherit is different.
        -moz-transform-style:inherit;
        transform-style:inherit;
    }
    body &gt; header .background-image {
        transform:translateZ(-1px) scale(2); // scale = 1 + (translateZ * -1) / perspective

        transform-origin:100%; // part 2 of fix for Webkit browsers.

        background-image:url(./src/images/background.jpg);
    }

    body &gt; section { z-index:1; }
}
</code></pre><p>Perspective is the distance, in pixels, a 3D element is placed from the view. A perspective of 1px is all that is required here, I never really used a higher one. Anything placed on the z-axis higher than its parent&#39;s perspective will not be rendered. Setting our transform-style to preserve-3d ensures the children of this element will be in a 3D space. The parallax element is placed further back on the z-axis, and is scaled to its original perceived size. For this, we need to use the calculation I have commented in the above code. Essentially with a 1px perspective, you only need to remember scale = 1 + -(translateZ). Finally, I have added the bug fixes in the comments of the code above. There are several, all of which have simple fixes.</p><h6 id=conclusion->Conclusion:</h6><p>If it isn&#39;t already obvious, we&#39;ve built a single moving element that has been placed in a 3D space, pushed it back and scaled it to its original perceived size. If it doesn&#39;t work, or you have some questions, just ask!</p></div></main></body></html>